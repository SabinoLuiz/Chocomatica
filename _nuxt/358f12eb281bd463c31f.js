(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{244:function(e,t,n){var content=n(254);"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(10).default)("93019d7a",content,!0,{sourceMap:!1})},253:function(e,t,n){"use strict";var l=n(244);n.n(l).a},254:function(e,t,n){(t=n(9)(!1)).push([e.i,".fade-enter-active[data-v-6e3e7516],.fade-leave-active[data-v-6e3e7516]{transition:opacity .2s}.fade-enter[data-v-6e3e7516],.fade-leave-to[data-v-6e3e7516]{opacity:0}.fill[data-v-6e3e7516]{display:flex;align-items:center;justify-content:center;padding-left:0;padding-right:0}.fill[data-v-6e3e7516],.fill .white-flashing[data-v-6e3e7516]{position:absolute;top:0;left:0;width:1200px;height:630px}.fill .white-flashing[data-v-6e3e7516]{background-color:hsla(0,0%,100%,.73333);z-index:100}.fill .coins[data-v-6e3e7516]{top:20px}.fill .coins[data-v-6e3e7516],.fill .leo-message[data-v-6e3e7516]{position:absolute;right:20px;z-index:15}.fill .leo-message[data-v-6e3e7516]{bottom:20px}.fill .box-das-caixas-de-bombons[data-v-6e3e7516]{display:flex;align-items:center;justify-content:center;flex-direction:column;position:relative}.fill .box-das-caixas-de-bombons .avatar-container[data-v-6e3e7516]{position:absolute;top:0;left:140px;text-align:center}.fill .box-das-caixas-de-bombons .avatar-mask[data-v-6e3e7516]{display:flex;align-items:center;justify-content:center;align-items:flex-start;width:174px;height:90px;border-radius:50px;overflow:hidden;-webkit-clip-path:circle(35% at 53% 50%);clip-path:circle(35% at 53% 50%)}.fill .box-das-caixas-de-bombons .avatar-mask .avatar[data-v-6e3e7516]{transform-origin:56% 6%;transform:scale(.44)}.fill .box-das-caixas-de-bombons .name[data-v-6e3e7516]{text-align:center;padding-left:9px;padding-top:3px}.fill .box-das-caixas-de-bombons .tiles-container[data-v-6e3e7516]{padding:66px 33px 26px 43px}.fill .box-das-caixas-de-bombons .tiles-container.six-pack .tiles-holder-wrap[data-v-6e3e7516]{padding:0 76px}.fill .info[data-v-6e3e7516]{width:300px;position:absolute;top:119px;left:88px;text-align:center}.fill .info .text[data-v-6e3e7516]{color:#fff;font-size:24px}.fill .info .seta-explicacao[data-v-6e3e7516]{position:absolute;top:54px;left:230px}.fill .tiles-example[data-v-6e3e7516]{z-index:60;width:250px;display:flex;align-items:center;justify-content:center;justify-content:flex-start;transform:scale(1.2);margin-bottom:120px}.fill .tiles-example.example-fifth-stage[data-v-6e3e7516]{width:301px}.fill .estante[data-v-6e3e7516]{margin-left:-20px;margin-top:-90px;display:flex;align-items:center;justify-content:center;position:relative}.fill .estante .line__tile-holder[data-v-6e3e7516]{position:absolute;top:10px;width:94%;display:flex;align-items:center;justify-content:space-around}.fill .estante[data-v-6e3e7516] .drop-tiles{width:200px;height:80px;border:2px solid transparent;border-radius:5px}.fill .estante .transparent[data-v-6e3e7516]{opacity:.2}.fill .estante .transparent.etiqueta[data-v-6e3e7516]{opacity:0}.fill .estante .lines[data-v-6e3e7516]{flex-direction:column;width:666px;height:478px;top:40px}.fill .estante .lines[data-v-6e3e7516],.fill .estante .lines .line[data-v-6e3e7516]{display:flex;align-items:center;justify-content:center;position:relative}.fill .estante .lines .line[data-v-6e3e7516]{font-size:19px;width:100%;height:166px}.fill .estante .lines .line .line-title[data-v-6e3e7516]{align-self:flex-end;text-align:center}.fill .estante .hide-lines[data-v-6e3e7516]{position:absolute;width:664px;height:0;bottom:32px;left:48px;background:rgba(186,160,206,.7)}.fill .estante .hide-lines.four[data-v-6e3e7516]{height:487px}.fill .estante .hide-lines.three[data-v-6e3e7516]{height:357px}.fill .estante .hide-lines.two[data-v-6e3e7516]{height:237px}.fill .estante .hide-lines.one[data-v-6e3e7516]{height:118px}",""]),e.exports=t},264:function(e,t,n){"use strict";n.r(t);n(54),n(20),n(42),n(43),n(55);var l=n(23),r=n(30),o=(n(38),n(21),n(19),n(136),n(22),n(107)),c=n(6),h=n(37),animate=n(4);function d(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function f(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?d(Object(source),!0).forEach((function(t){Object(r.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):d(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var m={data:function(){return{selectedAvatar:this.$store.state.user.avatar,name:this.$store.state.user.name,selectedTiles:[],pieceValues:{numbers:o.c.numbers,colors:o.c.colors},lines:o.c.stages,longNumbers:o.a,totalCoins:this.$store.state.stage.totalCoins,stageDialogues:h.e,tutorial:{targets:[".tiles-container",".estante"],timeoutPass:6e3},showDialogue:!0,highlightTimeout:{},highlightInterval:{},popTimeout:{},timesLeft:4,firstTrace:!1,stageCoins:0,messagePopped:!1,messageDestroy:!1,showTiles:!1}},computed:{currentStageClass:function(){return this.longNumbers[4-this.stage]},currentStage:function(){var e=this;return o.c.stages.find((function(s){return s.id===e.stage}))},isLineComplete:function(){return this.stage<5&&this.lines[this.stage-1].holders.every((function(e){return e.complete}))},currentLine:function(){return this.stage<5?this.lines[this.stage-1]:this.currentStage},currentLineHolders:function(){return this.currentLine.holders?this.currentLine.holders.map((function(e){return e.tiles})):this.lines.map((function(e){return e.holders}))},stage:function(){return this.$store.state.stage.index+1},tutorialTiles:function(){return h.f[this.stage-1]},dialogueLength:function(){return h.e[this.stage-1].dialogs.length},currentMinimum:function(){return 5===this.stage?0:1},gameReseted:function(){return this.$store.state.gameReseted}},watch:{currentLineHolders:function(e,t){var n=this,l=this.currentLine.holders;if(l){var r=this.currentStage.drawMethod,o=!0,h=!1,d=void 0;try{for(var m,v=function(){var e=m.value,t=Object(c.p)(f(f({value:e.tiles},r),{},{maxItems:n.currentMaxItems(l.id)}));e.complete=t,e.tiles.forEach((function(e){return e.complete=t})),n.isLineComplete&&setTimeout(n.reselectTiles,1100)},x=l[Symbol.iterator]();!(o=(m=x.next()).done);o=!0)v()}catch(e){h=!0,d=e}finally{try{o||null==x.return||x.return()}finally{if(h)throw d}}}},stage:function(){var e=this;if(6===this.stage&&this.$router.push("/stage-six"),this.showTiles=!1,this.showDialogue=!0,this.clearTimeoutHighlight(),this.clearIntervalHighlight(),4===this.stage){var t=Object(c.b)(this.lines.map((function(e){return e.holders})));t.pop(),this.$store.commit("stage/fixedTiles",t)}setTimeout((function(){e.stage<5?e.selectedTiles=e.sortPieces():e.generateStageFive(),e.saveStage(e.stage)}),1e3)},selectedTiles:{handler:function(e){var t=Object(c.b)(e);this.$store.state.saves.stageSaved!==this.stage&&this.saveStage(this.stage),e.some((function(e){return"highlight"===e.class}))||this.$store.commit("stage/saveTiles",t)},deep:!0},gameReseted:function(e){e&&this.resetStage()}},created:function(){if(this.$store.commit("stageReseted"),this.pieceValues={numbers:o.c.numbers,colors:o.c.colors},this.stageCoins=this.$store.state.stageCoins,this.$store.state.stage.lines.length?this.lines=Object(c.b)(this.$store.state.stage.lines):this.lines=Object(c.b)(o.c.stages).filter((function(e){return!!e.holders})).map((function(e){return f(f({},e),{},{lineComplete:!1})})),this.$store.state.stage.tiles.length>this.currentMinimum?this.selectedTiles=Object(c.b)(this.$store.state.stage.tiles):this.stage<5?this.selectedTiles=this.sortPieces():this.generateStageFive(),this.showDialogue=this.$store.state.stage.showDialogue,this.showDialogue||this.startTimeoutHighlight(),!this.$store.state.stage.savedFixes){var e=this.lines.map((function(e){return e.holders.map((function(e){return{fixedTiles:0,tileLeft:0,tileRight:0}}))}));this.$store.commit("stage/saveTilesofFive",e)}},destroyed:function(){this.clearTimeoutHighlight(),this.clearIntervalHighlight(),this.$store.commit("stageReseted")},methods:{generateStageFive:function(){var e=this.$store.state.stage.fixedTiles,t=Object(c.b)(this.lines.map((function(t,n){return{arr:e[n],drawMethod:t.drawMethod}})));this.selectedTiles=this.generatePieces(t),this.stageCoins=0,this.cleanLines(),this.saveStage(this.stage)},fixedTiles:function(e,t){var n=this.$store.state.stage.fixedTiles;return n.length&&e<3?Object(c.b)(n[e][t].tiles):[]},currentMaxItems:function(e){return 4===e?3:this.currentLine.maxItems},sortPieces:function(){for(var e=this.firstDraw(3),t=[],i=0,n=e.length;i<n;i++)t.push.apply(t,[e[i]].concat(Object(l.a)(Object(c.f)(this.pieceValues,this.currentStage.drawMethod,e[i],2))));var r=Object(c.d)(this.currentStage.drawMethod.sorterAttribute);return t.push(Object(c.l)(this.pieceValues,t,this.currentStage.drawMethod)),Object(c.m)(t).map((function(p,e){return f(f({},p),{},{index:e,highlight:"".concat(r,"-").concat(p[r]),class:"blank",complete:!1})}))},addCoin:function(){this.stageCoins++,this.$store.commit("addCoin")},removeCoin:function(){console.log(this.stageCoins),this.stageCoins--,this.$store.commit("removeCoin")},saveStage:function(e){var t=Object(c.b)(this.selectedTiles),n=Object(c.b)(this.lines);this.$store.commit("saves/saveHolderTile",t),this.$store.commit("saves/saveStageTile",n)},popComment:function(){var e=this;document.querySelector(".leo-message")||Object(c.a)(40,100)&&(this.messagePopped=!0,this.popTimeout=setTimeout((function(){Object(animate.r)(".leo-message",(function(){return e.messagePopped=!1}))}),4e3))},firstDraw:function(e){var t=this,n=this.pieceValues.numbers;"none"!==this.currentStage.filter&&(n=this.pieceValues.numbers.filter((function(e){return!t.currentStage.filter.includes(e)})));for(var l=Object(c.g)(this.pieceValues.colors,e),r=Object(c.g)(n,e),o=[],i=0;i<e;i++)o.push({color:l[i],number:r[i]});return o},selectRandomTiles:function(e){for(var t=[],i=0;i<e;i++){var n=Object(c.k)(this.pieceValues),l=n.color,r=n.number;t.push({color:l,number:r})}return t},startTimeoutHighlight:function(){var e=this;this.clearTimeoutHighlight(),this.highlightTimeout=setTimeout((function(){e.highlightPieces(),e.clearTimeoutHighlight()}),15e3)},clearTimeoutHighlight:function(){clearTimeout(this.highlightTimeout)},clearIntervalHighlight:function(){clearInterval(this.highlightInterval)},resetTiles:function(e){this.selectedTiles=[].concat(Object(l.a)(this.selectedTiles),Object(l.a)(e))},resetStage:function(){var e=this,t=this.$store.state.saves.holderTiles;if(this.selectedTiles=Object(c.b)(t),this.stage<5){this.currentLine.holders.forEach((function(e){e.tiles.length=0,e.complete=!1})),this.saveLines(),setTimeout((function(){return e.$store.commit("stageReseted")}),600)}else{var n=this.lines.map((function(e){return e.holders.map((function(e){return{fixedTiles:0,tileLeft:0,tileRight:0}}))}));this.stageCoins=0,this.$store.commit("stage/saveTilesofFive",n),setTimeout((function(){return e.$store.commit("stageReseted")}),600)}},saveLines:function(){var e=Object(c.b)(this.lines);this.$store.commit("stage/saveLines",e)},removeTile:function(e){var t=this,n=this.selectedTiles.indexOf(e);this.selectedTiles.splice(n,1),this.clearIntervalHighlight(),this.startTimeoutHighlight(),setTimeout((function(){return t.saveLines()}),400)},addTile:function(e){var t=this,n=e.addedItem,l=e.event;this.selectedTiles.splice(l.newIndex,0,n),this.clearIntervalHighlight(),this.startTimeoutHighlight(),setTimeout((function(){return t.saveLines()}),400)},updateTiles:function(e){var t=this,n=e.holder,l=e.tiles,r=e.stage;(void 0===r?4:r)<5&&(this.lines.map((function(e){return e.holders})).flat().find((function(e){return e.id===n.id})).tiles=Object(c.b)(l),this.clearIntervalHighlight(),setTimeout((function(){return t.saveLines()}),400))},saveCoins:function(e){this.totalCoins=e,this.$store.commit("stage/saveCoins",this.totalCoins);var t=this.currentLine.id,n=this.stage<5?".line-".concat(t):".lines";Object(animate.a)({totalNumber:3,parentElement:n,starClass:"estrelinha-do-brilho",starStyle:{position:"absolute",top:"10px",right:"10px"},callback:this.commitStage}),Object(animate.a)({totalNumber:3,parentElement:n,starClass:"estrelinha-do-brilho",starStyle:{position:"absolute",bottom:"10px",left:"10px"},direction:"left",callback:function(){return!1}})},disableLine:function(e){return this.stage<5&&e!==this.stage},hideDialogue:function(){this.showDialogue=!1,this.$store.commit("stage/hideDialogue"),this.startTimeoutHighlight(),this.showTiles=!0},generatePieces:function(e){var t=Object(c.h)(e),n=Object(c.g)(Object(c.c)(t),6).map((function(p,e){return f(f({},p),{},{index:e+50,class:"blank"})}));return Object(c.b)(Object(c.m)(n))},cleanLines:function(){var e=Object(c.b)(this.$store.state.stage.lines);e.forEach((function(e){e.id<4&&e.holders.forEach((function(e){e.tiles=[],e.complete=!1}))}));for(var i=0;i<3;i++)e[i].lineComplete=!1;this.$store.commit("stage/saveLines",e),this.lines=e},highlightPieces:function(){var e=this,t=[],n=[].concat(Object(l.a)(this.selectedTiles),Object(l.a)(this.currentLineHolders)).flat().filter((function(e){return!e.complete})),r=!0,o=!1,h=void 0;try{for(var d,f=function(){var e=d.value,l=n.filter((function(t){return t.highlight===e.highlight})).length;!t.includes(e.highlight)&&l>2&&t.push(e.highlight)},m=n[Symbol.iterator]();!(r=(d=m.next()).done);r=!0)f()}catch(e){o=!0,h=e}finally{try{r||null==m.return||m.return()}finally{if(o)throw h}}var v=Object(c.e)(t),x=n.filter((function(e){return e.highlight===v})),T=x.length>3?Object(c.i)(x):x;return this.timesLeft=4,this.highlightInterval=setInterval((function(){if(e.timesLeft--,e.timesLeft>0){var t=!0,n=!1,l=void 0;try{for(var r,o=function(){var e=r.value;e.class="highlight",setTimeout((function(){return e.class="blank"}),3e3)},c=T[Symbol.iterator]();!(t=(r=c.next()).done);t=!0)o()}catch(e){n=!0,l=e}finally{try{t||null==c.return||c.return()}finally{if(n)throw l}}}else e.clearIntervalHighlight()}),5e3),T},fillHolders:function(){var e=this.highlightPieces(),t=this.lines[this.stage-1].holders.find((function(e){return!e.complete}));if(this.selectedTiles=this.selectedTiles.filter((function(t){return!e.includes(t)})),t){var n,r=e.sort((function(a,b){var e=a.number,t=b.number;return e<t?-1:e>t?1:0}));(n=t.tiles).push.apply(n,Object(l.a)(r))}},commitStage:function(){this.$store.commit("stage/completeStage")},reselectTiles:function(){this.currentLine.lineComplete=!0},currentEtiqueta:function(line){return this.stage<5?line===this.stage?"etiqueta-current":"etiqueta transparent":"etiqueta-current"},lowerLine:function(line){return this.stage<5&&line<this.stage?"transparent":"visible"}}},v=(n(253),n(3)),component=Object(v.a)(m,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"fill"},[n("transition",{attrs:{name:"fade"}},[e.gameReseted?n("div",{staticClass:"white-flashing"}):e._e()]),e._v(" "),n("div",{staticClass:"coins"},[n("coins",{attrs:{stage:e.currentLine,"initial-coins":e.totalCoins,"stage-coins":e.stageCoins,"stage-reseted":e.gameReseted},on:{saveCoins:e.saveCoins,popComment:e.popComment}})],1),e._v(" "),n("div",{staticClass:"box-das-caixas-de-bombons"},[n("div",{staticClass:"avatar-container"},[n("div",{staticClass:"avatar-mask"},[n("div",{staticClass:"avatar",class:e.selectedAvatar})]),e._v(" "),n("div",{staticClass:"name"},[e._v(e._s(e.name))])]),e._v(" "),n("div",{staticClass:"tiles-container",class:5===e.stage?"six-pack":"blank"},[n("tiles-holder",{attrs:{"list-tiles":e.selectedTiles,stage:e.stage,"show-tiles":e.showTiles,group:"tiles"},on:{removeTile:e.removeTile,addTile:e.addTile,updateTiles:e.clearIntervalHighlight}})],1)]),e._v(" "),n("div",{staticClass:"estante"},[n("div",{staticClass:"lines"},e._l(e.lines,(function(line,t){return n("div",{key:line.id,staticClass:"line",class:["line-"+line.id,e.lowerLine(line.id)]},[n("div",{staticClass:"line__tile-holder"},e._l(line.holders,(function(l,r){return n("tiles-receiver",{key:l.id,staticClass:"drop-tiles first-drop",attrs:{"total-tiles":l.tiles.length,"list-tiles":l.tiles,"is-disabled":e.disableLine(line.id)||line.lineComplete||l.complete,validation:line.drawMethod,container:l,"fixed-tiles":e.fixedTiles(t,r),"max-items":e.currentMaxItems(line.id),stage:e.stage,position:{index:t,holderIndex:r},"stage-reseted":e.gameReseted,group:"tiles"},on:{updateTiles:e.updateTiles,addCoin:e.addCoin,removeCoin:e.removeCoin}})})),1),e._v(" "),n("span",{staticClass:"line-title",class:e.currentEtiqueta(line.id)},[e._v(e._s(line.title))])])})),0),e._v(" "),n("div",{staticClass:"hide-lines",class:e.currentStageClass})]),e._v(" "),e.showDialogue&&e.stage<6?n("dialogue",e._b({on:{close:e.hideDialogue},scopedSlots:e._u([{key:"stageContent",fn:function(t){return[5===t.index&&1===e.stage?n("backdrop-tutorial",e._b({on:{next:t.goNext}},"backdrop-tutorial",e.tutorial,!1),[n("div",{staticClass:"info"},[n("span",{staticClass:"text"},[e._v("Arraste as caixinhas e organize elas na estante")]),e._v(" "),n("div",{staticClass:"seta-explicacao"})])]):e._e(),e._v(" "),t.index>=e.dialogueLength-4&&t.index<e.dialogueLength-1&&5!==e.stage?n("div",{staticClass:"tiles-example"},e._l(e.tutorialTiles,(function(l,r){return n("div",{directives:[{name:"show",rawName:"v-show",value:t.index>=e.dialogueLength-4+r,expression:"dialogState.index >= dialogueLength - 4 + index"}],key:l.color+"-"+l.number,staticClass:"tile-container tile-piece",attrs:{"data-transfer":l.index}},[n("div",{staticClass:"tile",class:l.color+"-"+l.number})])})),0):e._e(),e._v(" "),2===t.index&&5===e.stage?n("div",{staticClass:"tiles-example example-fifth-stage"},[n("div",{staticClass:"exemplo-fase-5-com-retangulo"})]):e._e()]}}],null,!1,2833260089)},"dialogue",e.stageDialogues[e.stage-1],!1)):e._e(),e._v(" "),e.messagePopped?n("Message",{staticClass:"leo-message"}):e._e()],1)}),[],!1,null,"6e3e7516",null);t.default=component.exports}}]);